FROM node:17-alpine
ARG CACHEBUST=8925245
COPY . .
WORKDIR /app

# install node modules 
RUN npm i

#not required
# ARG REACT_APP_USER_ENDPOINT
# ARG REACT_APP_VIEW_ALL_SHIPMENT_ENDPOINT
# ARG REACT_APP_COMPLEX_SCRAPER_ENDPOINT

# ENV REACT_APP_USER_ENDPOINT=${REACT_APP_USER_ENDPOINT}
# ENV REACT_APP_VIEW_ALL_SHIPMENT_ENDPOINT=${REACT_APP_VIEW_ALL_SHIPMENT_ENDPOINT}
# ENV REACT_APP_COMPLEX_SCRAPER_ENDPOINT=$${REACT_APP_COMPLEX_SCRAPER_ENDPOINT}

#build app
RUN npm run build

ENV prod=0
# expose port 
EXPOSE 80
# start app
CMD ["npm", "start"]

